test io io io InterruptedIOException io OutputStream io OutputStreamWriter net ServerSocket net net http ConnectionClosedException http HttpEntity http HttpEntityEnclosingRequest http HttpException http HttpRequest http HttpResponse http HttpServerConnection http HttpStatus http MethodNotSupportedException http entity ContentProducer http entity EntityTemplate http entity http impl DefaultHttpResponseFactory http impl DefaultHttpServerConnection http impl NoConnectionReuseStrategy http BasicHttpParams http CoreConnectionPNames http CoreProtocolPNames http HttpParams http protocol BasicHttpContext http protocol BasicHttpProcessor http protocol HttpContext http protocol HttpProcessor http protocol HttpRequestHandler http protocol HttpRequestHandlerRegistry http protocol HttpService http EntityUtils TProcessor protocol TJSONProtocol protocol TProtocol transport TMemoryBuffer test ThriftTest server ServerTestBase TestHandler httpd args.length system.err.println requestlistenerthread t.setdaemon t.start httpfilehandler httprequesthandler docroot httpfilehandler docroot this.docroot docroot handle httprequest request httpresponse response httpcontext context httpexception method request.getrequestline touppercase locale.english method.equals method.equals method.equals methodnotsupportedexception method target request.getrequestline geturi request httpentityenclosingrequest target.equals httpentity entity httpentityenclosingrequest request entitycontent entityutils.tobytearray entity entitycontent output entitycontent output entitytemplate body entitytemplate contentproducer writeto outputstream outstream outputstreamwriter writer outputstreamwriter outstream writer.write output writer.flush body.setcontenttype response.setentity body target.indexof target target.substring target.indexof file this.docroot urldecoder.decode target file.exists response.setstatuscode httpstatus.sc_not_found entitytemplate body entitytemplate contentproducer writeto outputstream outstream outputstreamwriter writer outputstreamwriter outstream writer.write writer.write writer.write file.getpath writer.write writer.write writer.flush body.setcontenttype response.setentity body file.getpath file.canread file.isdirectory response.setstatuscode httpstatus.sc_forbidden entitytemplate body entitytemplate contentproducer writeto outputstream outstream outputstreamwriter writer outputstreamwriter outstream writer.write writer.write writer.write writer.flush body.setcontenttype response.setentity body file.getpath response.setstatuscode httpstatus.sc_ok body file response.setentity body file.getpath input tmemorybuffer inbuffer tmemorybuffer input.length inbuffer.write input tprotocol inprotocol tjsonprotocol inbuffer tmemorybuffer outbuffer tmemorybuffer tprotocol outprotocol tjsonprotocol outbuffer tprocessor processor thrifttest.processor testhandler processor.process inprotocol outprotocol output outbuffer.length outbuffer.readall output output.length output t.getmessage requestlistenerthread serversocket serversocket httpparams httpservice httpservice requestlistenerthread port docroot this.serversocket serversocket port basichttpparams this.params.setintparameter coreconnectionpnames.so_timeout setintparameter coreconnectionpnames.socket_buffer_size setbooleanparameter coreconnectionpnames.stale_connection_check setbooleanparameter coreconnectionpnames.tcp_nodelay setparameter coreprotocolpnames.origin_server httpprocessor httpproc basichttpprocessor httprequesthandlerregistry reqistry httprequesthandlerregistry reqistry.register httpfilehandler docroot this.httpservice httpservice httpproc noconnectionreusestrategy defaulthttpresponsefactory this.httpservice.setparams this.httpservice.sethandlerresolver reqistry run this.serversocket.getlocalport thread.interrupted socket this.serversocket.accept defaulthttpserverconnection conn defaulthttpserverconnection socket.getinetaddress conn.bind socket workerthread this.httpservice conn t.setdaemon t.start interruptedioexception ex system.err.println e.getmessage workerthread httpservice httpservice httpserverconnection conn workerthread httpservice httpservice httpserverconnection conn this.httpservice httpservice this.conn conn run httpcontext context basichttpcontext thread.interrupted this.conn.isopen this.httpservice.handlerequest this.conn context connectionclosedexception ex system.err.println ex system.err.println ex.getmessage httpexception ex system.err.println ex.getmessage this.conn.shutdown ignore 